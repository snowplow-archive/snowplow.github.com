<!DOCTYPE html>
<html>
<head>
	
	<title>Get started with R - Snowplow Analytics</title>
	

	<link rel="icon" type="image/x-icon" href="/favicon.ico" />

	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<link href="/static/css/styles.css" type="text/css" rel="stylesheet" />
	<link href="/static/css/pygments.css" type="text/css" rel="stylesheet" />
	
	<!--For the homepage slider-->
	<link rel="stylesheet" href="/static/css/nivo-slider.css" type="text/css" media="screen" />
	<link rel="stylesheet" href="/static/css/nivo-slider-theme-default.css" type="text/css" media="screen" />
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
	<script src="/static/js/jquery-nivo-slider-pack.js" type="text/javascript" ></script>
	<!--MathJax http://www.mathjax.org/-->
	<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_HTMLorMML.js"></script>
	<script type="text/javascript">
		MathJax.Hub.Config({
	      tex2jax: {
	        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre']
	      }
	    });
	    MathJax.Hub.Queue(function() {
	        var all = MathJax.Hub.getAllJax(), i;
	        for(i=0; i < all.length; i += 1) {
	            all[i].SourceElement().parentNode.className += ' has-jax';
	        }
    	});
	</script>
	<!-- end mathjax -->
	<!-- typekit -->
	<script type="text/javascript" src="//use.typekit.net/noo1diw.js"></script>
	<script type="text/javascript">try{Typekit.load();}catch(e){}</script>
	<!-- end typekit -->
</head>
<body>
	<!-- Google Tag Manager -->
	<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-DLRG"
	height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
	<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
	new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
	j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
	'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-DLRG');</script>
	<!-- End Google Tag Manager -->

	<div id="container">
		<div id="header" class="span-24">
  <div id="logo">
    <h1><a href="/"><img src="/static/img/snowplow-logo-website.png" title="Snowplow Analytics" /></a></h1>
  </div>
  <div id="menu" class="span-15">
    <ul>
      <li ><a href="/product/index.html">Product</a></li>
      <li ><a href="/services/index.html">Services</a></li>
      <li  class="active" ><a href="/analytics/index.html">Analytics</a></li>
      <li ><a href="/technology/index.html">Technology</a></li>
      <li ><a href="/blog.html">Blog</a></li>
      <li ><a id="mail" href="/about/index.html">About</a></li>
    </ul>
  </div>
</div>
	
		<div id="contents">
<a name='top'><h1>Getting started analyzing Snowplow data with R</h1></a>
<p>This guide is geared towards data analysts who have limited or no experience with R. It aims to get the reader started with R through concrete examples with Snowplow data - so that by the end of the guide, the reader can pull Snowplow data into R, play around with it and plot it. That should leave the reader comfortable enough to use other resources to build out her knowledge of R, and give her enough knowledge to start using R to perform productive analytics on Snowplow data.</p>

<ol>
<li><a href='#why'>Why use R?</a></li>

<li><a href='#start'>Getting started: plotting the number of uniques per day</a></li>

<li><a href='#intro-to-data-frames'>Having a look at the data: an introduction to data frames in R</a></li>

<li><a href='#1st-plot'>Creating our first plot</a></li>

<li><a href='#more-complex-example'>A more complicated example: comparing visit characteristics by a range of dimensions</a></li>

<li><a href='#factors'>Introducing factors in R</a></li>

<li><a href='#more-interesting-plots'>Producing some more interesting plots with ggplot2</a></li>

<li><a href='#further-reading'>Where to go from here</a></li>
</ol>

<p>In the first section of this guide, we outline why R is such an excellent tool to use. Next (sections 2 to 4), we work through how to pull a simple data set from Snowplow and visualize it in R. In sections 5 to 7, we work through a more complicated set of examples: one in which we pull a more involved data set from Snowplow, and visualize it in a number of ways that are difficult with traditional BI / OLAP tools in Excel.</p>
<a name='why'><h2>1. Why use R?</h2></a>
<p>R is a fantastic analytics tool. To date, however, only a minority of web analysts use it. To list just some of what makes it so excellent, especially when compared with traditional general purpose tools like Excel, and BI tools like Tableau:</p>

<ul>
<li>It is great for producing a wide variety of visualizations - including a much wider than those supported by BI tools</li>

<li>It has fantastic tools for extending existing visualizations and creating new visualizations all together</li>

<li>It is easy to document analytics performed with R and retrace your steps. (Simply by copying and pasting your steps into the R console.) This makes R a much <em>safer</em> and <em>more robust</em> environment to interrogate data than e.g. Excel or Tableau, where if you realize you made an error eight steps back, retracing your steps can be difficult and time consuming.</li>

<li>It is blindingly fast to both perform complicated analytics and generate beautiful visualizations. The syntax is incredibly concise - what you can achieve in one line of R can take hours of working through menus and options on other systems.</li>

<li>It helps you think through what you do with your data in a more rigorous way. R forces you to define your data types much more specifically than either Excel or BI tools like Tableau. That rigour is helpful - it means you do things faster, and you&#8217;re less liable to make mistakes.</li>

<li>It is great at statistics. Traditional BI tools and Excel <em>suck</em> at statistics. Sure you can calculate means, medians, quartiles etc. But actually pulling these together into meaningful distribution plots, or plotting how they change over time, is a pain in these tools, which are much better at counting and summing data. R is simply much better at statistics</li>

<li>It is a great tool for modelling data: it is straightforward to create models in R, and compare those models to your actual data sets, either formally through calculation, or by plotting you model(s) against your data(sets)</li>

<li>It has an <strong>enormous</strong> library of packages available for performing just about any type of analytics imaginable</li>

<li>It is free</li>

<li>It works on all platforms</li>
</ul>

<p>In spite of all the benefits listed above, people often find struggle with R to start off with. The command line is a difficult place to start, and R has some idiosyncracies that need to be understood.</p>

<p>In this guide, we cover them by working through practical examples with Snowplow data, paying special attention to covering some of those key concepts and idiosyncracies.</p>

<p>Back to <a href='#top'>top</a>.</p>
<a name='start'><h2>2. Getting started: plotting the number of unique visitors by day</h2></a>
<p><em>If you have not installed R yet, instructions on doing so can be found <a href='https://github.com/snowplow/snowplow/wiki/Setting-up-R-to-perform-more-sophisticated-analysis-on-your-data'>here</a>.</em></p>

<p>This guide assumes you have installed R, and installed the <code>RPostgreSQL</code> package required to get R to talk to PostgreSQL databases including Amazon Redshift. If you have not, installed this, you can do so by executing the following at the R prompt:</p>
<div class='highlight'><pre><code class='r'><span class='o'>&gt;</span> install.package<span class='p'>(</span><span class='s'>&quot;RPostgreSQL&quot;</span><span class='p'>)</span>
</code></pre>
</div>
<p>R will ask you to select a mirror to download the package from. Select a local mirror and the package should install automatically.</p>

<p>Now we need to tell R to use the package:</p>
<div class='highlight'><pre><code class='r'><span class='o'>&gt;</span> library<span class='p'>(</span><span class='s'>&quot;RPostgreSQL&quot;</span><span class='p'>)</span>
</code></pre>
</div>
<p>The library lets us execute a SQL query against our data in Redshift, and pulls the result of the query into R as a data frame. (We&#8217;ll explain a bit about data frames shortly.) The query we want to execute, to find out how many unique visitors we&#8217;ve received to our site by day, is:</p>
<div class='highlight'><pre><code class='sql'><span class='k'>SELECT</span> 
<span class='n'>to_char</span><span class='p'>(</span><span class='n'>collector_tstamp</span><span class='p'>,</span> <span class='s1'>&#39;YYYY-MM-DD&#39;</span><span class='p'>)</span> <span class='k'>AS</span> <span class='ss'>&quot;date&quot;</span><span class='p'>,</span>
<span class='k'>count</span><span class='p'>(</span><span class='k'>distinct</span><span class='p'>(</span><span class='n'>domain_userid</span><span class='p'>))</span> <span class='k'>AS</span> <span class='n'>uniques</span>
<span class='k'>FROM</span> <span class='ss'>&quot;public&quot;</span><span class='p'>.</span><span class='ss'>&quot;events&quot;</span>
<span class='k'>GROUP</span> <span class='k'>BY</span> <span class='ss'>&quot;date&quot;</span>
<span class='k'>ORDER</span> <span class='k'>BY</span> <span class='ss'>&quot;date&quot;</span><span class='p'>;</span>
</code></pre>
</div>
<p>To execute the query in R, first we have to setup a connection to our Redshift database, by executing the following commands:</p>
<div class='highlight'><pre><code class='r'>drv <span class='o'>&lt;-</span> dbDriver<span class='p'>(</span><span class='s'>&quot;PostgreSQL&quot;</span><span class='p'>)</span>
con <span class='o'>&lt;-</span> dbConnect<span class='p'>(</span>drv<span class='p'>,</span> host<span class='o'>=</span><span class='s'>&quot;&lt;&lt;ENTER HOST DETAILS HERE&gt;&gt;&quot;</span><span class='p'>,</span> port<span class='o'>=</span><span class='s'>&quot;&lt;&lt;ENTER PORT DETAILS HERE&gt;&gt;&quot;</span><span class='p'>,</span>dbname<span class='o'>=</span><span class='s'>&quot;&lt;&lt;ENTER DB NAME HERE&gt;&gt;&quot;</span><span class='p'>,</span> user<span class='o'>=</span><span class='s'>&quot;&lt;&lt;ENTER USERNAME HERE&gt;&gt;&quot;</span><span class='p'>,</span> password<span class='o'>=</span><span class='s'>&quot;&lt;&lt;ENTER PASSWORD HERE&gt;&gt;&quot;</span><span class='p'>)</span>
</code></pre>
</div>
<p>(For detials about where to find your host, port, dbname and username see the <a href='https://github.com/snowplow/snowplow/wiki/Setting-up-R-to-perform-more-sophisticated-analysis-on-your-data'>setup guide</a>.)</p>

<p>Now we can execute the query, and assign it to a variable called <code>uniquesByDay</code>, by executing the following:</p>
<div class='highlight'><pre><code class='r'>uniquesByDay <span class='o'>&lt;-</span> dbGetQuery<span class='p'>(</span>con<span class='p'>,</span> <span class='s'>&quot;</span>
<span class='s'>	SELECT </span>
<span class='s'>	to_char(collector_tstamp, &#39;YYYY-MM-DD&#39;) AS \&quot;</span>date\<span class='s'>&quot;,</span>
<span class='s'>	count(distinct(domain_userid)) AS uniques</span>
<span class='s'>	FROM \&quot;</span>public\<span class='s'>&quot;.\&quot;</span>events\<span class='s'>&quot;</span>
<span class='s'>	WHERE collector_tstamp &gt; &#39;2013-02-22&#39;</span>
<span class='s'>	GROUP BY \&quot;</span>date\<span class='s'>&quot;</span>
<span class='s'>	ORDER BY \&quot;</span>date\<span class='s'>&quot;</span>
<span class='s'>&quot;</span><span class='p'>)</span>
</code></pre>
</div>
<p>Note how double inverted commas have to be escaped with a backslash.</p>

<p>Back to <a href='#top'>top</a>.</p>
<a name='intro-to-data-frames'><h2>3. Having a look at the data: an introduction to data frames in R</h2></a>
<p>We can have a look at the <code>uniquesByDay</code> variable by simply entering it at the command line:</p>
<div class='highlight'><pre><code class='r'>uniquesByDay
</code></pre>
</div>
<p>R responds by dumping the contents of the variable to the screen. We see that the data is in the form of a table with three columns. The first column is the row number, the second column is the <code>date</code> column, and the third is the <code>uniques</code> column. We can view just the top 5 lines of data by entering <code>head(uniquesByDay)</code> at the prompt. We&#8217;ve pasted the contents of the screen, including what R returns, in our case:</p>
<div class='highlight'><pre><code class='r'><span class='o'>&gt;</span> head<span class='p'>(</span>uniquesByDay<span class='p'>)</span>
        date uniques
<span class='m'>1</span> <span class='m'>2013</span><span class='o'>-</span><span class='m'>02</span><span class='o'>-</span><span class='m'>22</span>      <span class='m'>78</span>
<span class='m'>2</span> <span class='m'>2013</span><span class='o'>-</span><span class='m'>02</span><span class='o'>-</span><span class='m'>23</span>      <span class='m'>70</span>
<span class='m'>3</span> <span class='m'>2013</span><span class='o'>-</span><span class='m'>02</span><span class='o'>-</span><span class='m'>24</span>      <span class='m'>76</span>
<span class='m'>4</span> <span class='m'>2013</span><span class='o'>-</span><span class='m'>02</span><span class='o'>-</span><span class='m'>25</span>     <span class='m'>125</span>
<span class='m'>5</span> <span class='m'>2013</span><span class='o'>-</span><span class='m'>02</span><span class='o'>-</span><span class='m'>26</span>     <span class='m'>130</span>
<span class='m'>6</span> <span class='m'>2013</span><span class='o'>-</span><span class='m'>02</span><span class='o'>-</span><span class='m'>27</span>      <span class='m'>88</span>
<span class='o'>&gt;</span> 
</code></pre>
</div>
<p>We can find out more about our uniquesByDay object, by typing <code>summary(uniquesByDay)</code> at the prompt:</p>
<div class='highlight'><pre><code class='r'><span class='o'>&gt;</span> summary<span class='p'>(</span>uniquesByDay<span class='p'>)</span>
     date              uniques      
 Length:<span class='m'>124</span>         Min.   : <span class='m'>16.00</span>  
 Class :character   <span class='m'>1</span>st Qu.: <span class='m'>75.75</span>  
 Mode  :character   Median :<span class='m'>116.00</span>  
                    Mean   :<span class='m'>114.73</span>  
                    <span class='m'>3</span>rd Qu.:<span class='m'>150.25</span>  
                    Max.   :<span class='m'>274.00</span>  
<span class='o'>&gt;</span>
</code></pre>
</div>
<p>R tells us that our data contains two columns: <code>date</code> and <code>uniques</code>. It tells us what type each column is: <code>date</code> is of type <code>character</code>, and <code>uniques</code> is a numeric field, for which it gives us some basic statistical information, so we can get a sense of the range of values.</p>

<p>Our <code>date</code> column really corresponds to <code>date</code>. We can update the data type for this column:</p>
<div class='highlight'><pre><code class='r'><span class='o'>&gt;</span> uniquesByDay<span class='p'>$</span>date <span class='o'>&lt;-</span> as.Date<span class='p'>(</span>uniquesByDay<span class='p'>$</span>date<span class='p'>)</span>
</code></pre>
</div>
<p>When we now look at the summary for our data frame, the type of data in the <code>date</code> column has changed:</p>
<div class='highlight'><pre><code class='r'><span class='o'>&gt;</span> summary<span class='p'>(</span>uniquesByDay<span class='p'>)</span>
      date               uniques      
 Min.   :<span class='m'>2013</span><span class='o'>-</span><span class='m'>02</span><span class='o'>-</span><span class='m'>22</span>   Min.   : <span class='m'>16.00</span>  
 <span class='m'>1</span>st Qu.:<span class='m'>2013</span><span class='o'>-</span><span class='m'>03</span><span class='o'>-</span><span class='m'>24</span>   <span class='m'>1</span>st Qu.: <span class='m'>75.75</span>  
 Median :<span class='m'>2013</span><span class='o'>-</span><span class='m'>04</span><span class='o'>-</span><span class='m'>24</span>   Median :<span class='m'>116.00</span>  
 Mean   :<span class='m'>2013</span><span class='o'>-</span><span class='m'>04</span><span class='o'>-</span><span class='m'>24</span>   Mean   :<span class='m'>114.73</span>  
 <span class='m'>3</span>rd Qu.:<span class='m'>2013</span><span class='o'>-</span><span class='m'>05</span><span class='o'>-</span><span class='m'>25</span>   <span class='m'>3</span>rd Qu.:<span class='m'>150.25</span>  
 Max.   :<span class='m'>2013</span><span class='o'>-</span><span class='m'>06</span><span class='o'>-</span><span class='m'>25</span>   Max.   :<span class='m'>274.00</span>  
<span class='o'>&gt;</span> 
</code></pre>
</div>
<p>We can get further information on the structure of the data frame by executing the <code>str()</code> function on it:</p>
<div class='highlight'><pre><code class='r'><span class='o'>&gt;</span> str<span class='p'>(</span>uniquesByDay<span class='p'>)</span>
<span class='s'>&#39;data.frame&#39;</span>:	<span class='m'>124</span> obs. of  <span class='m'>2</span> variables:
 <span class='p'>$</span> date   : Date<span class='p'>,</span> format: <span class='s'>&quot;2013-02-22&quot;</span> <span class='s'>&quot;2013-02-23&quot;</span> <span class='m'>...</span>
 <span class='p'>$</span> uniques: num  <span class='m'>78</span> <span class='m'>70</span> <span class='m'>76</span> <span class='m'>125</span> <span class='m'>130</span> <span class='m'>88</span> <span class='m'>84</span> <span class='m'>69</span> <span class='m'>35</span> <span class='m'>75</span> <span class='m'>...</span>
</code></pre>
</div>
<p>This confirms that the type of the first column has been set to a date format.</p>

<p>Back to <a href='#top'>top</a>.</p>
<a name='1st-plot'><h2>4. Creating our first plot</h2></a>
<p>There are a number of built in and additional libraries for plotting data visualizations in R. We recommend starting out with the absolutely excellent <code>ggplot2</code>.</p>

<p>First, install the <code>ggplot2</code> package, if you have not done so previously:</p>
<div class='highlight'><pre><code class='r'><span class='o'>&gt;</span> install.packages<span class='p'>(</span><span class='s'>&quot;ggplot2&quot;</span><span class='p'>)</span>
</code></pre>
</div>
<p>Now that it&#8217;s installed, you can load the library:</p>
<div class='highlight'><pre><code class='r'><span class='o'>&gt;</span> library<span class='p'>(</span><span class='s'>&quot;ggplot2&quot;</span><span class='p'>)</span>
</code></pre>
</div>
<p>Now we can plot the number of uniques over time, using the <code>qplot</code> (quickplot) command:</p>
<div class='highlight'><pre><code class='r'><span class='o'>&gt;</span> qplot<span class='p'>(</span>date<span class='p'>,</span> uniques<span class='p'>,</span> data<span class='o'>=</span>uniquesByDay<span class='p'>,</span> geom<span class='o'>=</span><span class='s'>&quot;line&quot;</span><span class='p'>)</span>
</code></pre>
</div>
<p>The plot appears in a new window:</p>

<p><img alt='uniques-by-day' src='/static/img/analytics/tools/r/uniques-by-day.png' /></p>

<p>Back to <a href='#top'>top</a>.</p>
<a name='more-complex-example'><h2>5. A more complicated example: comparing visit characteristics by a range of dimensions</h2></a>
<p>The previous example a was simple enough start. It didn&#8217;t enable us to do anything that could not easily be achieved using any other visualization tool.</p>

<p>In our second example, we&#8217;ll pull a more complicated data set from Snowplow, and try out some visualizations in GGPlot2 (boxplot and jittered scattergrams) that I think are awesome at conveying distribution information, and are not well supported by other tools.</p>

<p>For this example, we&#8217;re going to look at visit data by a number of different dimensions, and produce different plots to see how different visit characteristics vary with those different dimensions. This is classically something that is well supported by a BI / OLAP tool like Tableau. The example shows that R has those same capabilities, and in addition, a broader set of visualizations to enable us to unpick relationships between metrics and dimensions.</p>

<p>First, we need to design a SQL query to pull the cut of data we want. In this case, we want visit level data. We want to capture the following metrics for each visit:</p>

<ul>
<li>Number of distinct pages viewed (i.e. breadth of content engaged with)</li>

<li>Total number of events (as a measure of depth engagement)</li>
</ul>

<p>With the following dimensions:</p>

<ul>
<li>Whether or not the user visited our &#8220;services&#8221; page. (A goal of ours is to drive visitors to buy our services.)</li>

<li>The landing page the visitor arrived on</li>

<li>The referer that drove them to our website</li>

<li>The timestamp the visit started. (So we can analyse e.g. how behavior varies by day of the week.)</li>

<li>Which country the visitor is located in</li>

<li>The browser type</li>

<li>How many times the visitor had visited our website previously</li>
</ul>

<p>The SQL query to return our required measures by visit and some of the dimensions is straightforward:</p>
<div class='highlight'><pre><code class='sql'><span class='k'>SELECT</span>
<span class='n'>domain_userid</span><span class='p'>,</span>
<span class='n'>domain_sessionidx</span><span class='p'>,</span>
<span class='n'>geo_country</span><span class='p'>,</span>
<span class='n'>br_type</span><span class='p'>,</span>
<span class='k'>min</span><span class='p'>(</span><span class='n'>collector_tstamp</span><span class='p'>)</span> <span class='k'>AS</span> <span class='ss'>&quot;time_of_first_touch&quot;</span><span class='p'>,</span>
<span class='k'>count</span><span class='p'>(</span><span class='k'>distinct</span><span class='p'>(</span><span class='n'>page_urlpath</span><span class='p'>))</span> <span class='k'>AS</span> <span class='ss'>&quot;distinct_pages_visited&quot;</span><span class='p'>,</span>
<span class='k'>count</span><span class='p'>(</span><span class='o'>*</span><span class='p'>)</span> <span class='k'>as</span> <span class='ss'>&quot;number_of_events&quot;</span>
<span class='k'>FROM</span> <span class='ss'>&quot;public&quot;</span><span class='p'>.</span><span class='ss'>&quot;events&quot;</span>
<span class='k'>WHERE</span> <span class='n'>collector_tstamp</span> <span class='o'>&gt;</span> <span class='s1'>&#39;2013-02-22&#39;</span>
<span class='k'>GROUP</span> <span class='k'>BY</span> <span class='n'>domain_userid</span><span class='p'>,</span> <span class='n'>domain_sessionidx</span><span class='p'>,</span> <span class='n'>geo_country</span><span class='p'>,</span> <span class='n'>br_type</span>
</code></pre>
</div>
<p>We need to add a line about whether or not one of our services pages was visited as part of the customer journey. We can identify all the visits where the visitor did pop by one of our services pages by executing the following query:</p>
<div class='highlight'><pre><code class='sql'><span class='k'>SELECT</span>
<span class='n'>domain_userid</span><span class='p'>,</span>
<span class='n'>domain_sessionidx</span><span class='p'>,</span>
<span class='mi'>1</span> <span class='k'>AS</span> <span class='s1'>&#39;visited_services_pages&#39;</span>
<span class='k'>FROM</span> <span class='ss'>&quot;public&quot;</span><span class='p'>.</span><span class='ss'>&quot;events&quot;</span>
<span class='k'>WHERE</span> <span class='n'>page_urlpath</span> <span class='k'>LIKE</span> <span class='s1'>&#39;/services/%&#39;</span>
<span class='k'>GROUP</span> <span class='k'>BY</span> <span class='n'>domain_userid</span><span class='p'>,</span> <span class='n'>domain_sessionidx</span><span class='p'>,</span> <span class='n'>visited_services_pages</span>
</code></pre>
</div>
<p>And then join the results of the above query to our first query to generate the additional dimension:</p>
<div class='highlight'><pre><code class='sql'><span class='k'>SELECT</span>
<span class='n'>e</span><span class='p'>.</span><span class='n'>domain_userid</span><span class='p'>,</span> 
<span class='n'>e</span><span class='p'>.</span><span class='n'>domain_sessionidx</span><span class='p'>,</span>
<span class='n'>geo_country</span><span class='p'>,</span>
<span class='n'>br_type</span><span class='p'>,</span>
<span class='n'>visited_services_pages</span><span class='p'>,</span>
<span class='k'>min</span><span class='p'>(</span><span class='n'>collector_tstamp</span><span class='p'>)</span> <span class='k'>AS</span> <span class='ss'>&quot;time_of_first_touch&quot;</span><span class='p'>,</span>
<span class='k'>count</span><span class='p'>(</span><span class='k'>distinct</span><span class='p'>(</span><span class='n'>page_urlpath</span><span class='p'>))</span> <span class='k'>AS</span> <span class='ss'>&quot;distinct_pages_visited&quot;</span><span class='p'>,</span>
<span class='k'>count</span><span class='p'>(</span><span class='o'>*</span><span class='p'>)</span> <span class='k'>as</span> <span class='ss'>&quot;number_of_events&quot;</span>
<span class='k'>FROM</span> <span class='ss'>&quot;public&quot;</span><span class='p'>.</span><span class='ss'>&quot;events&quot;</span> <span class='n'>e</span>
<span class='k'>LEFT</span> <span class='k'>JOIN</span> <span class='p'>(</span>
	<span class='k'>SELECT</span>
	<span class='n'>domain_userid</span><span class='p'>,</span>
	<span class='n'>domain_sessionidx</span><span class='p'>,</span>
	<span class='s1'>&#39;1&#39;</span> <span class='k'>AS</span> <span class='ss'>&quot;visited_services_pages&quot;</span>
	<span class='k'>FROM</span> <span class='ss'>&quot;public&quot;</span><span class='p'>.</span><span class='ss'>&quot;events&quot;</span>
	<span class='k'>WHERE</span> <span class='n'>page_urlpath</span> <span class='k'>LIKE</span> <span class='s1'>&#39;/services/%&#39;</span>
	<span class='k'>GROUP</span> <span class='k'>BY</span> <span class='n'>domain_userid</span><span class='p'>,</span> <span class='n'>domain_sessionidx</span><span class='p'>,</span> <span class='n'>visited_services_pages</span>
<span class='p'>)</span> <span class='n'>s</span>
<span class='k'>ON</span> <span class='n'>e</span><span class='p'>.</span><span class='n'>domain_userid</span> <span class='o'>=</span> <span class='n'>s</span><span class='p'>.</span><span class='n'>domain_userid</span>
<span class='k'>AND</span> <span class='n'>e</span><span class='p'>.</span><span class='n'>domain_sessionidx</span> <span class='o'>=</span> <span class='n'>s</span><span class='p'>.</span><span class='n'>domain_sessionidx</span>
<span class='k'>WHERE</span> <span class='n'>collector_tstamp</span> <span class='o'>&gt;</span> <span class='s1'>&#39;2013-02-23&#39;</span>
<span class='k'>GROUP</span> <span class='k'>BY</span> <span class='n'>e</span><span class='p'>.</span><span class='n'>domain_userid</span><span class='p'>,</span> <span class='n'>e</span><span class='p'>.</span><span class='n'>domain_sessionidx</span><span class='p'>,</span> <span class='n'>geo_country</span><span class='p'>,</span> <span class='n'>br_type</span><span class='p'>,</span> <span class='n'>visited_services_pages</span>
</code></pre>
</div>
<p>Lastly we add the data about who are referer is, and what the URL of the landing page is. Both of these data points can be read from the first line of data for the visit, so we add them by doing an additional join with the output of the previous query, this time on <code>domain_userid</code>, <code>domain_sessionidx</code> <strong>and</strong> <code>min(collector_tstamp)</code>:</p>
<div class='highlight'><pre><code class='sql'><span class='k'>SELECT</span>
<span class='n'>t</span><span class='p'>.</span><span class='n'>domain_userid</span><span class='p'>,</span>
<span class='n'>t</span><span class='p'>.</span><span class='n'>domain_sessionidx</span><span class='p'>,</span>
<span class='n'>t</span><span class='p'>.</span><span class='n'>geo_country</span><span class='p'>,</span>
<span class='n'>t</span><span class='p'>.</span><span class='n'>br_type</span><span class='p'>,</span>
<span class='n'>r</span><span class='p'>.</span><span class='n'>page_urlpath</span> <span class='k'>AS</span> <span class='n'>landing_page</span><span class='p'>,</span>
<span class='n'>r</span><span class='p'>.</span><span class='n'>refr_medium</span><span class='p'>,</span>
<span class='n'>r</span><span class='p'>.</span><span class='n'>refr_source</span><span class='p'>,</span>
<span class='n'>r</span><span class='p'>.</span><span class='n'>refr_term</span><span class='p'>,</span>
<span class='n'>r</span><span class='p'>.</span><span class='n'>refr_urlhost</span><span class='p'>,</span>
<span class='n'>t</span><span class='p'>.</span><span class='n'>visited_services_pages</span><span class='p'>,</span>
<span class='n'>t</span><span class='p'>.</span><span class='n'>time_of_first_touch</span><span class='p'>,</span>
<span class='n'>t</span><span class='p'>.</span><span class='n'>distinct_pages_visited</span><span class='p'>,</span>
<span class='n'>t</span><span class='p'>.</span><span class='n'>number_of_events</span>
<span class='k'>FROM</span> <span class='p'>(</span>
	<span class='k'>SELECT</span>
	<span class='n'>e</span><span class='p'>.</span><span class='n'>domain_userid</span><span class='p'>,</span>
	<span class='n'>e</span><span class='p'>.</span><span class='n'>domain_sessionidx</span><span class='p'>,</span>
	<span class='n'>geo_country</span><span class='p'>,</span>
	<span class='n'>br_type</span><span class='p'>,</span>
	<span class='n'>visited_services_pages</span><span class='p'>,</span>
	<span class='k'>min</span><span class='p'>(</span><span class='n'>collector_tstamp</span><span class='p'>)</span> <span class='k'>AS</span> <span class='ss'>&quot;time_of_first_touch&quot;</span><span class='p'>,</span>
	<span class='k'>count</span><span class='p'>(</span><span class='k'>distinct</span><span class='p'>(</span><span class='n'>page_urlpath</span><span class='p'>))</span> <span class='k'>AS</span> <span class='ss'>&quot;distinct_pages_visited&quot;</span><span class='p'>,</span>
	<span class='k'>count</span><span class='p'>(</span><span class='o'>*</span><span class='p'>)</span> <span class='k'>as</span> <span class='ss'>&quot;number_of_events&quot;</span>
	<span class='k'>FROM</span> <span class='ss'>&quot;public&quot;</span><span class='p'>.</span><span class='ss'>&quot;events&quot;</span> <span class='k'>AS</span> <span class='n'>e</span>
	<span class='k'>LEFT</span> <span class='k'>JOIN</span> <span class='p'>(</span>
		<span class='k'>SELECT</span>
		<span class='n'>domain_userid</span><span class='p'>,</span>
		<span class='n'>domain_sessionidx</span><span class='p'>,</span>
		<span class='s1'>&#39;1&#39;</span> <span class='k'>AS</span> <span class='ss'>&quot;visited_services_pages&quot;</span>
		<span class='k'>FROM</span> <span class='ss'>&quot;public&quot;</span><span class='p'>.</span><span class='ss'>&quot;events&quot;</span>
		<span class='k'>WHERE</span> <span class='n'>page_urlpath</span> <span class='k'>LIKE</span> <span class='s1'>&#39;/services/%&#39;</span>
		<span class='k'>GROUP</span> <span class='k'>BY</span> <span class='n'>domain_userid</span><span class='p'>,</span> <span class='n'>domain_sessionidx</span><span class='p'>,</span> <span class='n'>visited_services_pages</span>
	<span class='p'>)</span> <span class='k'>AS</span> <span class='n'>s</span>
	<span class='k'>ON</span> <span class='n'>e</span><span class='p'>.</span><span class='n'>domain_userid</span> <span class='o'>=</span> <span class='n'>s</span><span class='p'>.</span><span class='n'>domain_userid</span>
	<span class='k'>AND</span> <span class='n'>e</span><span class='p'>.</span><span class='n'>domain_sessionidx</span> <span class='o'>=</span> <span class='n'>s</span><span class='p'>.</span><span class='n'>domain_sessionidx</span>
	<span class='k'>WHERE</span> <span class='n'>collector_tstamp</span> <span class='o'>&gt;</span> <span class='s1'>&#39;2013-02-22&#39;</span>
	<span class='k'>GROUP</span> <span class='k'>BY</span> <span class='n'>e</span><span class='p'>.</span><span class='n'>domain_userid</span><span class='p'>,</span> <span class='n'>e</span><span class='p'>.</span><span class='n'>domain_sessionidx</span><span class='p'>,</span> <span class='n'>geo_country</span><span class='p'>,</span> <span class='n'>br_type</span><span class='p'>,</span> <span class='n'>visited_services_pages</span>
<span class='p'>)</span> <span class='k'>AS</span> <span class='n'>t</span>
<span class='k'>JOIN</span> <span class='ss'>&quot;public&quot;</span><span class='p'>.</span><span class='ss'>&quot;events&quot;</span> <span class='k'>AS</span> <span class='n'>r</span>
<span class='k'>ON</span> <span class='n'>t</span><span class='p'>.</span><span class='n'>domain_userid</span> <span class='o'>=</span> <span class='n'>r</span><span class='p'>.</span><span class='n'>domain_userid</span>
<span class='k'>AND</span> <span class='n'>t</span><span class='p'>.</span><span class='n'>domain_sessionidx</span> <span class='o'>=</span> <span class='n'>r</span><span class='p'>.</span><span class='n'>domain_sessionidx</span>
<span class='k'>AND</span> <span class='n'>t</span><span class='p'>.</span><span class='n'>time_of_first_touch</span> <span class='o'>=</span> <span class='n'>r</span><span class='p'>.</span><span class='n'>collector_tstamp</span>
</code></pre>
</div>
<p>Now that we have our query, we can pull the data into R:</p>
<div class='highlight'><pre><code class='r'><span class='o'>&gt;</span> visits <span class='o'>&lt;-</span> dbGetQuery<span class='p'>(</span>con<span class='p'>,</span> <span class='s'>&quot;</span>
<span class='s'>	SELECT</span>
<span class='s'>	t.domain_userid,</span>
<span class='s'>	t.domain_sessionidx,</span>
<span class='s'>	t.geo_country,</span>
<span class='s'>	t.br_type,</span>
<span class='s'>	r.page_urlpath AS landing_page,</span>
<span class='s'>	r.refr_medium,</span>
<span class='s'>	r.refr_source,</span>
<span class='s'>	r.refr_term,</span>
<span class='s'>	r.refr_urlhost,</span>
<span class='s'>	t.visited_services_pages,</span>
<span class='s'>	t.time_of_first_touch,</span>
<span class='s'>	t.distinct_pages_visited,</span>
<span class='s'>	t.number_of_events</span>
<span class='s'>	FROM (</span>
<span class='s'>		SELECT</span>
<span class='s'>		e.domain_userid,</span>
<span class='s'>		e.domain_sessionidx,</span>
<span class='s'>		geo_country,</span>
<span class='s'>		br_type,</span>
<span class='s'>		visited_services_pages,</span>
<span class='s'>		min(collector_tstamp) AS \&quot;</span>time_of_first_touch\<span class='s'>&quot;,</span>
<span class='s'>		count(distinct(page_urlpath)) AS \&quot;</span>distinct_pages_visited\<span class='s'>&quot;,</span>
<span class='s'>		count(*) as \&quot;</span>number_of_events\<span class='s'>&quot;</span>
<span class='s'>		FROM \&quot;</span>public\<span class='s'>&quot;.\&quot;</span>events\<span class='s'>&quot; AS e</span>
<span class='s'>		LEFT JOIN (</span>
<span class='s'>			SELECT</span>
<span class='s'>			domain_userid,</span>
<span class='s'>			domain_sessionidx,</span>
<span class='s'>			&#39;1&#39; AS \&quot;</span>visited_services_pages\<span class='s'>&quot;</span>
<span class='s'>			FROM \&quot;</span>public\<span class='s'>&quot;.\&quot;</span>events\<span class='s'>&quot;</span>
<span class='s'>			WHERE page_urlpath LIKE &#39;/services/%&#39;</span>
<span class='s'>			GROUP BY domain_userid, domain_sessionidx, visited_services_pages</span>
<span class='s'>		) AS s</span>
<span class='s'>		ON e.domain_userid = s.domain_userid</span>
<span class='s'>		AND e.domain_sessionidx = s.domain_sessionidx</span>
<span class='s'>		WHERE collector_tstamp &gt; &#39;2013-02-22&#39;</span>
<span class='s'>		GROUP BY e.domain_userid, e.domain_sessionidx, geo_country, br_type, visited_services_pages</span>
<span class='s'>	) AS t</span>
<span class='s'>	JOIN \&quot;</span>public\<span class='s'>&quot;.\&quot;</span>events\<span class='s'>&quot; AS r</span>
<span class='s'>	ON t.domain_userid = r.domain_userid</span>
<span class='s'>	AND t.domain_sessionidx = r.domain_sessionidx</span>
<span class='s'>	AND t.time_of_first_touch = r.collector_tstamp</span>
<span class='s'>&quot;</span><span class='p'>)</span>
</code></pre>
</div>
<p>Our <code>visits</code> data frame is more complicated than the <code>uniquesByDay</code> data frame we created last time. Let&#8217;s inspect the structure:</p>
<div class='highlight'><pre><code class='r'><span class='o'>&gt;</span> str<span class='p'>(</span>visits<span class='p'>)</span>
<span class='s'>&#39;data.frame&#39;</span>:	<span class='m'>21521</span> obs. of  <span class='m'>13</span> variables:
 <span class='p'>$</span> domain_userid         : chr  <span class='s'>&quot;602978179116344f&quot;</span> <span class='s'>&quot;eb11ac6179052d3d&quot;</span> <span class='s'>&quot;20e77808d8778a3b&quot;</span> <span class='s'>&quot;eb11ac6179052d3d&quot;</span> <span class='m'>...</span>
 <span class='p'>$</span> domain_sessionidx     : int  <span class='m'>61</span> <span class='m'>2</span> <span class='m'>1</span> <span class='m'>3</span> <span class='m'>10</span> <span class='m'>1</span> <span class='m'>1</span> <span class='m'>4</span> <span class='m'>24</span> <span class='m'>1</span> <span class='m'>...</span>
 <span class='p'>$</span> geo_country           : chr  <span class='s'>&quot;GB&quot;</span> <span class='s'>&quot;GB&quot;</span> <span class='s'>&quot;GB&quot;</span> <span class='s'>&quot;GB&quot;</span> <span class='m'>...</span>
 <span class='p'>$</span> br_type               : chr  <span class='s'>&quot;Browser&quot;</span> <span class='s'>&quot;Browser&quot;</span> <span class='s'>&quot;Browser&quot;</span> <span class='s'>&quot;Browser&quot;</span> <span class='m'>...</span>
 <span class='p'>$</span> landing_page          : chr  <span class='s'>&quot;/&quot;</span> <span class='s'>&quot;/&quot;</span> <span class='s'>&quot;/&quot;</span> <span class='s'>&quot;/blog/2013/02/15/snowplow-0.7.3-released/&quot;</span> <span class='m'>...</span>
 <span class='p'>$</span> refr_medium           : chr  <span class='s'>&quot;&quot;</span> <span class='s'>&quot;&quot;</span> <span class='s'>&quot;search&quot;</span> <span class='s'>&quot;internal&quot;</span> <span class='m'>...</span>
 <span class='p'>$</span> refr_source           : chr  <span class='s'>&quot;&quot;</span> <span class='s'>&quot;&quot;</span> <span class='s'>&quot;Google&quot;</span> <span class='s'>&quot;&quot;</span> <span class='m'>...</span>
 <span class='p'>$</span> refr_term             : chr  <span class='s'>&quot;&quot;</span> <span class='s'>&quot;&quot;</span> <span class='s'>&quot;&quot;</span> <span class='s'>&quot;&quot;</span> <span class='m'>...</span>
 <span class='p'>$</span> refr_urlhost          : chr  <span class='s'>&quot;&quot;</span> <span class='s'>&quot;&quot;</span> <span class='s'>&quot;www.google.co.uk&quot;</span> <span class='s'>&quot;snowplowanalytics.com&quot;</span> <span class='m'>...</span>
 <span class='p'>$</span> visited_services_pages: chr  <span class='kc'>NA</span> <span class='kc'>NA</span> <span class='s'>&quot;1&quot;</span> <span class='kc'>NA</span> <span class='m'>...</span>
 <span class='p'>$</span> time_of_first_touch   : POSIXct<span class='p'>,</span> format: <span class='s'>&quot;2013-02-22 11:51:27&quot;</span> <span class='s'>&quot;2013-02-22 11:52:56&quot;</span> <span class='m'>...</span>
 <span class='p'>$</span> distinct_pages_visited: num  <span class='m'>1</span> <span class='m'>2</span> <span class='m'>4</span> <span class='m'>1</span> <span class='m'>1</span> <span class='m'>4</span> <span class='m'>4</span> <span class='m'>2</span> <span class='m'>5</span> <span class='m'>10</span> <span class='m'>...</span>
 <span class='p'>$</span> number_of_events      : num  <span class='m'>5</span> <span class='m'>4</span> <span class='m'>5</span> <span class='m'>1</span> <span class='m'>1</span> <span class='m'>4</span> <span class='m'>6</span> <span class='m'>2</span> <span class='m'>5</span> <span class='m'>32</span> <span class='m'>...</span>
<span class='o'>&gt;</span> 
</code></pre>
</div>
<p>Back to <a href='#top'>top</a>.</p>
<a name='factors'><h2>6. Introducing factors in R</h2></a>
<p>This is a convenient moment to take a quick aside from our example and introduce factors in R.</p>

<p>In data analysis, we can distinguish three types of variable:</p>
<table><thead><tr><th><strong>Type of variable</strong></th><th><strong>Description</strong></th><th><strong>Example</strong></th></tr></thead><tbody><tr><td style='text-align: left;'>Continuous</td><td style='text-align: left;'>A variable that can take any value with a range</td><td style='text-align: left;'>Height of a person, session length</td>
</tr><tr><td style='text-align: left;'>Ordinal</td><td style='text-align: left;'>A discrete (not continuous) variable, but one in which there is an order</td><td style='text-align: left;'>Sizes of T-shirt (small / medium / large)</td>
</tr><tr><td style='text-align: left;'>Nominal</td><td style='text-align: left;'>A discrete (not continuous) variable, where there is no inherent order between values</td><td style='text-align: left;'>Landing pages</td>
</tr></tbody></table>
<p>Continuous variables in R are typically numeric. Ordinal and nominal variables are factors. We can tell R which of the columns in our data frame are factors. This will help R</p>

<ol>
<li>Process our data more efficiently</li>

<li>Plot our data more intelligently (because R will understand the type of variable in each column)</li>
</ol>

<p><code>domain_userid</code>, for example, is a factor: it can take one of a finite (but large) number of values of cookies set. It is an unordered factor, because there is no hierarchy between values. We can tell R it is factor by entering:</p>
<div class='highlight'><pre><code class='r'>visits<span class='p'>$</span>domain_userid <span class='o'>&lt;-</span> as.factor<span class='p'>(</span>visits<span class='p'>$</span>domain_userid<span class='p'>)</span>
</code></pre>
</div>
<p>If we inspect the structure of that column, we&#8217;ll see it is now a factor:</p>
<div class='highlight'><pre><code class='r'><span class='o'>&gt;</span> str<span class='p'>(</span>visits<span class='p'>$</span>domain_userid<span class='p'>)</span>
 Factor w<span class='o'>/</span> <span class='m'>9621</span> levels <span class='s'>&quot;&quot;</span><span class='p'>,</span><span class='s'>&quot;0002ade0b7018c82&quot;</span><span class='p'>,</span><span class='m'>..</span>: <span class='m'>3661</span> <span class='m'>8850</span> <span class='m'>1268</span> <span class='m'>8850</span> <span class='m'>596</span> <span class='m'>1142</span> <span class='m'>1619</span> <span class='m'>8850</span> <span class='m'>8695</span> <span class='m'>426</span> <span class='m'>...</span>
</code></pre>
</div>
<p>Let&#8217;s update the status of our other dimensions in the same way:</p>
<div class='highlight'><pre><code class='r'><span class='o'>&gt;</span> visits<span class='p'>$</span>domain_sessionidx <span class='o'>&lt;-</span> as.factor<span class='p'>(</span>visits<span class='p'>$</span>domain_sessionidx<span class='p'>)</span>
<span class='o'>&gt;</span> visits<span class='p'>$</span>geo_country <span class='o'>&lt;-</span> as.factor<span class='p'>(</span>visits<span class='p'>$</span>geo_country<span class='p'>)</span>
<span class='o'>&gt;</span> visits<span class='p'>$</span>br_type <span class='o'>&lt;-</span> as.factor<span class='p'>(</span>visits<span class='p'>$</span>br_type<span class='p'>)</span>
<span class='o'>&gt;</span> visits<span class='p'>$</span>landing_page <span class='o'>&lt;-</span> as.factor<span class='p'>(</span>visits<span class='p'>$</span>landing_page<span class='p'>)</span>
<span class='o'>&gt;</span> visits<span class='p'>$</span>refr_medium <span class='o'>&lt;-</span> as.factor<span class='p'>(</span>visits<span class='p'>$</span>refr_medium<span class='p'>)</span>
<span class='o'>&gt;</span> visits<span class='p'>$</span>refr_source <span class='o'>&lt;-</span> as.factor<span class='p'>(</span>visits<span class='p'>$</span>refr_source<span class='p'>)</span>
<span class='o'>&gt;</span> visits<span class='p'>$</span>refr_term <span class='o'>&lt;-</span> as.factor<span class='p'>(</span>visits<span class='p'>$</span>refr_term<span class='p'>)</span>
<span class='o'>&gt;</span> visits<span class='p'>$</span>refr_urlhost <span class='o'>&lt;-</span> as.factor<span class='p'>(</span>visits<span class='p'>$</span>refr_urlhost<span class='p'>)</span>
<span class='o'>&gt;</span> visits<span class='p'>$</span>visited_services_pages <span class='o'>&lt;-</span> as.factor<span class='p'>(</span>visits<span class='p'>$</span>visited_services_pages<span class='p'>)</span>
<span class='o'>&gt;</span> 
</code></pre>
</div>
<p>We can view the updated structure of the data frame:</p>
<div class='highlight'><pre><code class='r'><span class='o'>&gt;</span> str<span class='p'>(</span>visits<span class='p'>)</span>
<span class='s'>&#39;data.frame&#39;</span>:	<span class='m'>21521</span> obs. of  <span class='m'>13</span> variables:
 <span class='p'>$</span> domain_userid         : Factor w<span class='o'>/</span> <span class='m'>9621</span> levels <span class='s'>&quot;&quot;</span><span class='p'>,</span><span class='s'>&quot;0002ade0b7018c82&quot;</span><span class='p'>,</span><span class='m'>..</span>: <span class='m'>3661</span> <span class='m'>8850</span> <span class='m'>1268</span> <span class='m'>8850</span> <span class='m'>596</span> <span class='m'>1142</span> <span class='m'>1619</span> <span class='m'>8850</span> <span class='m'>8695</span> <span class='m'>426</span> <span class='m'>...</span>
 <span class='p'>$</span> domain_sessionidx     : Factor w<span class='o'>/</span> <span class='m'>194</span> levels <span class='s'>&quot;0&quot;</span><span class='p'>,</span><span class='s'>&quot;1&quot;</span><span class='p'>,</span><span class='s'>&quot;2&quot;</span><span class='p'>,</span><span class='s'>&quot;3&quot;</span><span class='p'>,</span><span class='m'>..</span>: <span class='m'>62</span> <span class='m'>3</span> <span class='m'>2</span> <span class='m'>4</span> <span class='m'>11</span> <span class='m'>2</span> <span class='m'>2</span> <span class='m'>5</span> <span class='m'>25</span> <span class='m'>2</span> <span class='m'>...</span>
 <span class='p'>$</span> geo_country           : Factor w<span class='o'>/</span> <span class='m'>106</span> levels <span class='s'>&quot;A1&quot;</span><span class='p'>,</span><span class='s'>&quot;AD&quot;</span><span class='p'>,</span><span class='s'>&quot;AE&quot;</span><span class='p'>,</span><span class='m'>..</span>: <span class='m'>36</span> <span class='m'>36</span> <span class='m'>36</span> <span class='m'>36</span> <span class='m'>35</span> <span class='m'>25</span> <span class='m'>100</span> <span class='m'>36</span> <span class='m'>53</span> <span class='m'>35</span> <span class='m'>...</span>
 <span class='p'>$</span> br_type               : Factor w<span class='o'>/</span> <span class='m'>4</span> levels <span class='s'>&quot;Browser&quot;</span><span class='p'>,</span><span class='s'>&quot;Email Client&quot;</span><span class='p'>,</span><span class='m'>..</span>: <span class='m'>1</span> <span class='m'>1</span> <span class='m'>1</span> <span class='m'>1</span> <span class='m'>1</span> <span class='m'>1</span> <span class='m'>1</span> <span class='m'>1</span> <span class='m'>1</span> <span class='m'>1</span> <span class='m'>...</span>
 <span class='p'>$</span> landing_page          : Factor w<span class='o'>/</span> <span class='m'>137</span> levels <span class='s'>&quot;&quot;</span><span class='p'>,</span><span class='s'>&quot;/&quot;</span><span class='p'>,</span><span class='s'>&quot;/about/community.html&quot;</span><span class='p'>,</span><span class='m'>..</span>: <span class='m'>2</span> <span class='m'>2</span> <span class='m'>2</span> <span class='m'>74</span> <span class='m'>21</span> <span class='m'>2</span> <span class='m'>25</span> <span class='m'>103</span> <span class='m'>45</span> <span class='m'>2</span> <span class='m'>...</span>
 <span class='p'>$</span> refr_medium           : Factor w<span class='o'>/</span> <span class='m'>6</span> levels <span class='s'>&quot;&quot;</span><span class='p'>,</span><span class='s'>&quot;email&quot;</span><span class='p'>,</span><span class='s'>&quot;internal&quot;</span><span class='p'>,</span><span class='m'>..</span>: <span class='m'>1</span> <span class='m'>1</span> <span class='m'>4</span> <span class='m'>3</span> <span class='m'>4</span> <span class='m'>1</span> <span class='m'>1</span> <span class='m'>3</span> <span class='m'>1</span> <span class='m'>1</span> <span class='m'>...</span>
 <span class='p'>$</span> refr_source           : Factor w<span class='o'>/</span> <span class='m'>19</span> levels <span class='s'>&quot;&quot;</span><span class='p'>,</span><span class='s'>&quot;Bing Images&quot;</span><span class='p'>,</span><span class='m'>..</span>: <span class='m'>1</span> <span class='m'>1</span> <span class='m'>6</span> <span class='m'>1</span> <span class='m'>6</span> <span class='m'>1</span> <span class='m'>1</span> <span class='m'>1</span> <span class='m'>1</span> <span class='m'>1</span> <span class='m'>...</span>
 <span class='p'>$</span> refr_term             : Factor w<span class='o'>/</span> <span class='m'>56</span> levels <span class='s'>&quot;&quot;</span><span class='p'>,</span><span class='s'>&quot;arduino&quot;</span><span class='p'>,</span><span class='s'>&quot;CHARTIO&quot;</span><span class='p'>,</span><span class='m'>..</span>: <span class='m'>1</span> <span class='m'>1</span> <span class='m'>1</span> <span class='m'>1</span> <span class='m'>1</span> <span class='m'>1</span> <span class='m'>1</span> <span class='m'>1</span> <span class='m'>1</span> <span class='m'>1</span> <span class='m'>...</span>
 <span class='p'>$</span> refr_urlhost          : Factor w<span class='o'>/</span> <span class='m'>156</span> levels <span class='s'>&quot;&quot;</span><span class='p'>,</span><span class='s'>&quot;ab-analytics.com&quot;</span><span class='p'>,</span><span class='m'>..</span>: <span class='m'>1</span> <span class='m'>1</span> <span class='m'>104</span> <span class='m'>40</span> <span class='m'>114</span> <span class='m'>1</span> <span class='m'>1</span> <span class='m'>40</span> <span class='m'>1</span> <span class='m'>1</span> <span class='m'>...</span>
 <span class='p'>$</span> visited_services_pages: Factor w<span class='o'>/</span> <span class='m'>1</span> level <span class='s'>&quot;1&quot;</span>: <span class='kc'>NA</span> <span class='kc'>NA</span> <span class='m'>1</span> <span class='kc'>NA</span> <span class='kc'>NA</span> <span class='kc'>NA</span> <span class='kc'>NA</span> <span class='kc'>NA</span> <span class='kc'>NA</span> <span class='m'>1</span> <span class='m'>...</span>
 <span class='p'>$</span> time_of_first_touch   : POSIXct<span class='p'>,</span> format: <span class='s'>&quot;2013-02-22 11:51:27&quot;</span> <span class='s'>&quot;2013-02-22 11:52:56&quot;</span> <span class='m'>...</span>
 <span class='p'>$</span> distinct_pages_visited: num  <span class='m'>1</span> <span class='m'>2</span> <span class='m'>4</span> <span class='m'>1</span> <span class='m'>1</span> <span class='m'>4</span> <span class='m'>4</span> <span class='m'>2</span> <span class='m'>5</span> <span class='m'>10</span> <span class='m'>...</span>
 <span class='p'>$</span> number_of_events      : num  <span class='m'>5</span> <span class='m'>4</span> <span class='m'>5</span> <span class='m'>1</span> <span class='m'>1</span> <span class='m'>4</span> <span class='m'>6</span> <span class='m'>2</span> <span class='m'>5</span> <span class='m'>32</span> <span class='m'>...</span>
<span class='o'>&gt;</span> 
</code></pre>
</div>
<p>Back to <a href='#top'>top</a>.</p>
<a name='more-interesting-plots'><h2>7. Producing some more interesting plots</h2></a>
<p>Let&#8217;s start by examining the breadth and depth of engagement by visit:</p>
<div class='highlight'><pre><code class='r'><span class='o'>&gt;</span> qplot<span class='p'>(</span>distinct_pages_visited<span class='p'>,</span> number_of_events<span class='p'>,</span> data<span class='o'>=</span>visits<span class='p'>,</span> geom<span class='o'>=</span><span class='s'>&quot;point&quot;</span><span class='p'>)</span>
</code></pre>
</div>
<p><img alt='basic-bread-and-depth' src='/static/img/analytics/tools/r/breadth-and-depth-engagement.png' /></p>

<p>That is <em>kind of</em> interesting: it shows that we have visitors who engage very deeply with only one page on our site (e.g. the visitor at the top left of the scatter) <strong>and</strong> we have visitors who engage lightly across a broad range of pages (bottom right) and deeply with a lot of pages (top right). However, most of the points are in the bottom left, and they are too closely spaced to see how closely packed they are.</p>

<p>We can get a clearer view if we plot a jitter plot: this &#8220;jitters&#8221; points left and right about where they would otherwise be plotted, making it easier to identify areas with a high concentration of points:</p>
<div class='highlight'><pre><code class='r'><span class='o'>&gt;</span> qplot<span class='p'>(</span>distinct_pages_visited<span class='p'>,</span> number_of_events<span class='p'>,</span> data<span class='o'>=</span>visits<span class='p'>,</span> geom<span class='o'>=</span><span class='s'>&quot;jitter&quot;</span><span class='p'>,</span> alpha<span class='o'>=</span>I<span class='p'>(</span><span class='m'>5</span><span class='o'>/</span><span class='m'>100</span><span class='p'>))</span> <span class='o'>+</span> 
scale_y_continuous<span class='p'>(</span>limits<span class='o'>=</span>c<span class='p'>(</span><span class='m'>0</span><span class='p'>,</span><span class='m'>250</span><span class='p'>))</span> <span class='o'>+</span> 
scale_x_continuous<span class='p'>(</span>limits<span class='o'>=</span>c<span class='p'>(</span><span class='m'>0</span><span class='p'>,</span><span class='m'>20</span><span class='p'>))</span>

Warning message:
Removed <span class='m'>69</span> rows containing missing values <span class='p'>(</span>geom_point<span class='p'>)</span><span class='m'>.</span>
</code></pre>
</div>
<p><img alt='jitter-with-transparency' src='/static/img/analytics/tools/r/jitter-with-transparency.png' /></p>

<p>Note: we have changed the plot type from &#8220;point&#8221; to &#8220;jitter&#8221; to jitter each point. The &#8220;alpha&#8221; argument is responsible for point transparency: we have set it to 5% (i.e. 20 points in one place will be required to create a black spot). The <code>scale_y_continuous</code> and <code>scale_x_continuous</code> arguments scale the x and y axes so that we zoom in on the point of the graph where most of our visits lie. R has kindly reminded us that some of our points lie outside this range, and so have been been removed.</p>

<p>The graph shows us that the majority of visitors do not engage deeply. It actually appears that engagement is likely to be <em>deeper</em> if a visitor visits <em>fewer</em> pages. That is interesting: we can explore if using a boxplot:</p>
<div class='highlight'><pre><code class='r'><span class='o'>&gt;</span> qplot<span class='p'>(</span>factor<span class='p'>(</span>distinct_pages_visited<span class='p'>),</span> number_of_events<span class='p'>,</span> data<span class='o'>=</span>visits<span class='p'>,</span> geom<span class='o'>=</span><span class='s'>&quot;boxplot&quot;</span><span class='p'>)</span> <span class='o'>+</span> 
scale_y_continuous<span class='p'>(</span>limits<span class='o'>=</span>c<span class='p'>(</span><span class='m'>0</span><span class='p'>,</span><span class='m'>500</span><span class='p'>))</span>
</code></pre>
</div>
<p><img alt='boxplot' src='/static/img/analytics/tools/r/boxplot.png' /></p>

<p>The boxplot shows that our earlier intuition was wrong: engagement depth increases <em>with</em> breadth. We had thought looking at the jittered plot that a higher proportion of people who only engaged with one page engaged more deeply. Now we can see that this was false: it looked to be the case, because the absolute number of people engaging deeply who only look at one page is higher than the actual number who engage deeply with a broader set. The boxplot controls for the difference in absolute numbers: we are instead looking at the distribution within each breadth level.</p>

<p>One thing to notice is that when producing the boxplot, we plot <code>factor(distinct_pages_visited)</code> on the x-axis rather than simply <code>distinct_pages_visited</code>. That is because whereas a scatter or jitter plot can be produced by plotting a continuous variable on the x-axis, a boxplot requires a discrete variable. Applying the <code>factor</code> function converts our continuous variable into a discrete variable very simply: in general, R makes converting one type of variable into another very simple.</p>

<p>The boxplot above was interesting: it showed very clearly a relationship between breadth and depth of engagement by visit. Let&#8217;s use the same plot, but this time to compare breadth of engagement by landing page:</p>
<div class='highlight'><pre><code class='r'><span class='o'>&gt;</span> qplot<span class='p'>(</span>landing_page<span class='p'>,</span> distinct_pages_visited<span class='p'>,</span> data<span class='o'>=</span>visits<span class='p'>,</span> geom<span class='o'>=</span><span class='s'>&quot;boxplot&quot;</span><span class='p'>)</span>
</code></pre>
</div>
<p><img alt='messy-boxplot' src='/static/img/analytics/tools/r/messy-boxplot.png' /></p>

<p>Ouch - this graph is very messy: breadth of engagement does appear to vary by landing page, but there are too many (100+) landing pages to make the analysis straight forward. What we want is to plot the results just for the top 10 landing pages, by number of visits.</p>

<p>To do this, let&#8217;s start by identifying the top 10 landing pages by number of visits. This is a straightforward query to write in SQL: luckily a package is available for R called <code>sqldf</code> that enables you to to execute SQL statements against data frames in R directly, and returns the results as a new data frame:</p>
<div class='highlight'><pre><code class='r'><span class='o'>&gt;</span> install.packages<span class='p'>(</span><span class='s'>&quot;sqldf&quot;</span><span class='p'>)</span>
<span class='o'>&gt;</span> library<span class='p'>(</span><span class='s'>&quot;sqldf&quot;</span><span class='p'>)</span>
Loading required package: DBI
Loading required package: gsubfn
Loading required package: proto
Loading required namespace: tcltk
Loading required package: chron
Loading required package: RSQLite
Loading required package: RSQLite.extfuns
<span class='o'>&gt;</span> topLandingPages <span class='o'>=</span> sqldf<span class='p'>(</span><span class='s'>&quot;select landing_page, count(*) as cnt from visits group by landing_page order by cnt desc limit 10&quot;</span><span class='p'>)</span>
</code></pre>
</div>
<p>We&#8217;ve now created a data frame with two columns: <code>landing_page</code> (with the landing page name) and <code>cnt</code> (with the count of visits). There are 10 lines of data in the frame, which corresopnd to the top 10 landing pages by number of visits.</p>

<p>We can now use this to create a subset of the <code>visit</code> data so we only include visits where the landing page is in our top 10 list:</p>
<div class='highlight'><pre><code class='r'><span class='o'>&gt;</span> visitsSubset <span class='o'>&lt;-</span> subset<span class='p'>(</span>visits<span class='p'>,</span> landing_page <span class='o'>%in%</span> topLandingPage<span class='p'>$</span>landing_page<span class='p'>)</span>
</code></pre>
</div>
<p>Before we produce our plot, it would be nice to make <code>landing_page</code> an ordered factor, where the ordering is determined by the number of visits. This is straightforward to do:</p>
<div class='highlight'><pre><code class='r'><span class='o'>&gt;</span> visitsSubset<span class='p'>$</span>landing_page <span class='o'>&lt;-</span> factor<span class='p'>(</span>
visitsSubset<span class='p'>$</span>landing_page<span class='p'>,</span> 
levels <span class='o'>=</span> topLandingPages<span class='p'>$</span>landing_page<span class='p'>,</span> 
ordered<span class='o'>=</span><span class='kc'>TRUE</span><span class='p'>)</span>
</code></pre>
</div>
<p>We can now plot breadth of engagement by landing page, just for the top landing page:</p>
<div class='highlight'><pre><code class='r'><span class='o'>&gt;</span> qplot<span class='p'>(</span>landing_page<span class='p'>,</span> distinct_pages_visited<span class='p'>,</span> data<span class='o'>=</span>visitsSubset<span class='p'>,</span> geom<span class='o'>=</span><span class='s'>&quot;boxplot&quot;</span><span class='p'>)</span>
</code></pre>
</div>
<p><img alt='boxplot-messy-axis' src='/static/img/analytics/tools/r/boxplot-messy-axis.png' /></p>

<p>We can tidy up the x-axis by aligning the labels on the axis vertically, by adding <code> + theme(axis.text.x = element_text(angle=90, vjust=0.4))</code> to our command. We can also hide the outliers on our plot, to make it clear, by adding <code>outlier.shape=NA</code>:</p>
<div class='highlight'><pre><code class='r'><span class='o'>&gt;</span> qplot<span class='p'>(</span>landing_page<span class='p'>,</span> distinct_pages_visited<span class='p'>,</span> data<span class='o'>=</span>visitsSubset<span class='p'>,</span> geom<span class='o'>=</span><span class='s'>&quot;boxplot&quot;</span><span class='p'>,</span> outlier.shape<span class='o'>=</span><span class='kc'>NA</span><span class='p'>)</span> <span class='o'>+</span> 
theme<span class='p'>(</span>axis.text.x <span class='o'>=</span> element_text<span class='p'>(</span>angle<span class='o'>=</span><span class='m'>90</span><span class='p'>,</span> vjust<span class='o'>=</span><span class='m'>0.4</span><span class='p'>))</span> <span class='o'>+</span> 
scale_y_continuous<span class='p'>(</span>limits<span class='o'>=</span>c<span class='p'>(</span><span class='m'>0</span><span class='p'>,</span><span class='m'>15</span><span class='p'>))</span>
</code></pre>
</div>
<p><img alt='tidy-boxplot-breadth-of-engagement' src='/static/img/analytics/tools/r/tidy-boxplot-engagement-breadth-by-landing-page.png' /></p>

<p>The results are very interesting: visitors who land on the homepage and analytics cookbook are much more likely to engage more broadly with content on the site, rather than visitors who land on the specific blog posts (e.g. on writing Hive UDFs or dealing with Hadoop small files problem.)</p>

<p>Let&#8217;s see if there is a similar pattern in the <em>depth</em> of engagement by landing page. (This is likely: remember we showed in our first boxplot that visitors who engage more broadly are more likely to also engage more deeply.)</p>
<div class='highlight'><pre><code class='r'><span class='o'>&gt;</span> qplot<span class='p'>(</span>landing_page<span class='p'>,</span> number_of_events<span class='p'>,</span> data<span class='o'>=</span>visitsSubset<span class='p'>,</span> geom<span class='o'>=</span><span class='s'>&quot;boxplot&quot;</span><span class='p'>,</span> outlier.shape<span class='o'>=</span><span class='kc'>NA</span><span class='p'>)</span> <span class='o'>+</span> 
theme<span class='p'>(</span>axis.text.x <span class='o'>=</span> element_text<span class='p'>(</span>angle<span class='o'>=</span><span class='m'>90</span><span class='p'>,</span> vjust<span class='o'>=</span><span class='m'>0.4</span><span class='p'>))</span> <span class='o'>+</span> 
scale_y_continuous<span class='p'>(</span>limits<span class='o'>=</span>c<span class='p'>(</span><span class='m'>0</span><span class='p'>,</span><span class='m'>20</span><span class='p'>))</span>
</code></pre>
</div>
<p><img alt='tidy-boxplot-depth-of-engagement' src='/static/img/analytics/tools/r/boxplot-depth-of-engagement-by-landing-page.png' /></p>

<p>The impact of landing page on depth of engagement is not nearly as pronounced as that between landing page and depth of engagement. That is likely to be because of both:</p>

<ul>
<li>The <em>intent</em> of people landing on specific blog posts is likely to be much more focused on learning specific bits of information (that may not be Snowplow specific), rather than learn about Snowplow in general. (Which someone landing on the hoempage or cookbook homepage are likely to be interested in.)</li>

<li>The design of the homepage and analytics cookbook homepage encourage users to explore beyond the page much more forcefully than the links that surround individual blog posts.</li>
</ul>

<p>Let&#8217;s now have a look and see if breadth of engagement changes depending on the referer type. To do this, we simply swap out <code>landing_page</code> as our x-axis dimension (first argument in <code>qplot</code>) and swap in <code>refr_medium</code>. Also note that we have switched back to using our original data frame <code>visits</code>, rather than the subset we created for the landing page analysis:</p>
<div class='highlight'><pre><code class='r'><span class='o'>&gt;</span> qplot<span class='p'>(</span>refr_medium<span class='p'>,</span> number_of_events<span class='p'>,</span> data<span class='o'>=</span>visits<span class='p'>,</span> geom<span class='o'>=</span><span class='s'>&quot;boxplot&quot;</span><span class='p'>,</span> outlier.shape<span class='o'>=</span><span class='kc'>NA</span><span class='p'>)</span> <span class='o'>+</span>
scale_y_continuous<span class='p'>(</span>limits<span class='o'>=</span>c<span class='p'>(</span><span class='m'>0</span><span class='p'>,</span><span class='m'>30</span><span class='p'>))</span>
</code></pre>
</div>
<p>Visitors from email and search tend to engage more deeply with the Snowplow content. Are they more likely to buy our services, though?</p>
<div class='highlight'><pre><code class='r'><span class='o'>&gt;</span> qplot<span class='p'>(</span>refr_medium<span class='p'>,</span> data<span class='o'>=</span>visits<span class='p'>,</span> fill<span class='o'>=</span>visited_services_page geom<span class='o'>=</span><span class='s'>&quot;bar&quot;</span><span class='p'>,</span> position<span class='o'>=</span><span class='s'>&quot;fill&quot;</span><span class='p'>)</span>
</code></pre>
</div>
<p><img alt='barchart-conversion-by-refr-medium' src='/static/img/analytics/tools/r/barchart-conversion-by-refr-medium.png' /></p>

<p>Note that <code>position=&quot;fill&quot;</code> makes each bar on our bar graph extend 100%.</p>

<p>The chart is interesting - it suggests that even though e.g. direct visitors engage less deeply, overall, they are more likely to visit our services pages (and hence convert) than visitors from search. The relationship between level of engagement and conversion isn&#8217;t straightforward - we can explore it by comparing our engagement scatter plots (breadth vs depth) for visitors that did visit the services page, with those that do not:</p>
<div class='highlight'><pre><code class='r'><span class='o'>&gt;</span> qplot<span class='p'>(</span>distinct_pages_visited<span class='p'>,</span> number_of_events<span class='p'>,</span> data<span class='o'>=</span>visits<span class='p'>,</span> 
facets <span class='o'>=</span> visited_services_pages ~<span class='m'>.</span><span class='p'>,</span>geom<span class='o'>=</span><span class='s'>&quot;jitter&quot;</span><span class='p'>,</span> alpha<span class='o'>=</span>I<span class='p'>(</span><span class='m'>5</span><span class='o'>/</span><span class='m'>100</span><span class='p'>))</span> <span class='o'>+</span> 
scale_y_continuous<span class='p'>(</span>limits<span class='o'>=</span>c<span class='p'>(</span><span class='m'>0</span><span class='p'>,</span><span class='m'>250</span><span class='p'>))</span> <span class='o'>+</span> 
scale_x_continuous<span class='p'>(</span>limits<span class='o'>=</span>c<span class='p'>(</span><span class='m'>0</span><span class='p'>,</span><span class='m'>20</span><span class='p'>))</span>
</code></pre>
</div>
<p><img alt='facetted-scatter-plot' src='/static/img/analytics/tools/r/facetted-scatter.png' /></p>

<p>We used the <code>facet</code> argument above to ask R to plot us two version of the scatter plot, one for visits where the services pages were visted, and one for visits where they were not, to see if the overall pattern of engagement for the two groups is different. The results are interesting: they suggest that in both cases, there is a strong relationship between breadth and depth of engagement. (These are highly correlated.) However, visitors that visited the services pages are <em>more likely</em> to engage both more deeply and more broadly, overall, than those who do not, as evidenced from the lower fraction of points at the bottom right of the graph. (Further visualization work is required to specify this more precisely.)</p>

<p>Back to <a href='#top'>top</a>.</p>
<a name='further-reading'><h2>8. Where to go from here?</h2></a>
<p>This tutorial barely scratches the surface of what is possible with R. The purpose of it is to give enough familiarity with basic R functions around fetching data, managing data via data frames, and plotting data, that the reader will be able to get up and running with R on top of Snowplow data.</p>

<p>There is a wealth of material on R available. The following are some recommended resources:</p>

<ul>
<li><a href='http://www.manning.com/kabacoff/'>R in Action</a>. An excellent and thorough overview of R, with lots of straightforward-to-follow examples</li>

<li>Hacley Wickham&#8217;s excellent <a href='http://www.amazon.com/gp/product/0387981403'>ggplot2</a> book. Written by the author of <code>ggplot2</code>, this covers the actual graphics grammar implemented by this excellent library</li>

<li><a href='http://www.r-bloggers.com/'>R-bloggers</a>. Regular updates, recipes and R-related news</li>
</ul>

<p>We will be buildling out the number of recipes in the Snowplow Analytics cookbook that use R. At the moment, we have:</p>

<ul>
<li><a href='/analytics/catalog-analytics/market-basket-analysis-identifying-products-that-sell-well-together.html'>Performing market basket analysis with R</a></li>

<li><strong>More to come</strong>&#8230;</li>
</ul>

<p>Back to <a href='#top'>top</a>.</p>
</div>

 <div id="sidebar">
	<h1>Analysts Cookbook</h1>
	<p>
		<a href="/analytics/index.html" >Overview</a>
		
	</p>
	<p>
		<a href="/analytics/customer-analytics/overview.html" >Customer analytics</a>
		
	</p>
	<p>
		<a href="/analytics/catalog-analytics/overview.html" >Catalog analytics</a>
		
	</p>
	<p>
		<a href="/analytics/platform-analytics/overview.html" >Platform analytics</a>
		
	</p>
	<p>
		<a href="/analytics/tools-and-techniques/overview.html" class="active">Tools and techniques</a>
		
		<ul>
			
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
									
					
				
					
						
							
							<li><a href="/analytics/tools-and-techniques/overview.html">Overview</a></li>
									
									
					
				
					
									
					
				
					
									
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
			
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
									
					
				
					
									
					
				
					
						
							
							<li><a href="/analytics/tools-and-techniques/converting-snowplow-data-into-a-format-suitable-for-olap.html">Converting Snowplow data into a format suitable for OLAP</a></li>
									
									
					
				
					
									
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
			
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
									
					
				
					
									
					
				
					
									
					
				
					
						
							
							<li class="active"><a href="/analytics/tools-and-techniques/get-started-analysing-snowplow-data-with-r.html" class="active">Get started with R</a></li>
									
									
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
			
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
						
							
							<li><a href="/analytics/tools-and-techniques/using-mahout-recommendation-engines-to-deliver-content-or-product-recommendations-with-snowplow.html">Using Mahout recommendation engines to deliver content or product recommendations with Snowplow</a></li>
									
									
					
				
					
									
					
				
					
									
					
				
					
									
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
			
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
									
					
				
					
									
					
				
					
									
					
				
					
									
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
			
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
									
					
				
					
									
					
				
					
									
					
				
					
									
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
			
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
									
					
				
					
									
					
				
					
									
					
				
					
									
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
			
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
									
					
				
					
									
					
				
					
									
					
				
					
									
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
			
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
									
					
				
					
									
					
				
					
									
					
				
					
									
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
			
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
									
					
				
					
									
					
				
					
									
					
				
					
									
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
			
		</ul>		
		
	</p>
</div>

		<div id="footer">
	<p>Copyright  Snowplow Analytics Limited 2012 - 2013.  All rights reserved</p>
</div>
	</div>
		<!-- Following Javascript function used by Disqus to count the number of comments for each blog post and display in the main index -->
	  	<script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'snowplow'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
            var s = document.createElement('script'); s.async = true;
            s.type = 'text/javascript';
            s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
        </script>
        <!-- begin olark code -->
		<script data-cfasync="false" type='text/javascript'>/*<![CDATA[*/window.olark||(function(c){var f=window,d=document,l=f.location.protocol=="https:"?"https:":"http:",z=c.name,r="load";var nt=function(){
		f[z]=function(){
		(a.s=a.s||[]).push(arguments)};var a=f[z]._={
		},q=c.methods.length;while(q--){(function(n){f[z][n]=function(){
		f[z]("call",n,arguments)}})(c.methods[q])}a.l=c.loader;a.i=nt;a.p={
		0:+new Date};a.P=function(u){
		a.p[u]=new Date-a.p[0]};function s(){
		a.P(r);f[z](r)}f.addEventListener?f.addEventListener(r,s,false):f.attachEvent("on"+r,s);var ld=function(){function p(hd){
		hd="head";return["<",hd,"></",hd,"><",i,' onl' + 'oad="var d=',g,";d.getElementsByTagName('head')[0].",j,"(d.",h,"('script')).",k,"='",l,"//",a.l,"'",'"',"></",i,">"].join("")}var i="body",m=d[i];if(!m){
		return setTimeout(ld,100)}a.P(1);var j="appendChild",h="createElement",k="src",n=d[h]("div"),v=n[j](d[h](z)),b=d[h]("iframe"),g="document",e="domain",o;n.style.display="none";m.insertBefore(n,m.firstChild).id=z;b.frameBorder="0";b.id=z+"-loader";if(/MSIE[ ]+6/.test(navigator.userAgent)){
		b.src="javascript:false"}b.allowTransparency="true";v[j](b);try{
		b.contentWindow[g].open()}catch(w){
		c[e]=d[e];o="javascript:var d="+g+".open();d.domain='"+d.domain+"';";b[k]=o+"void(0);"}try{
		var t=b.contentWindow[g];t.write(p());t.close()}catch(x){
		b[k]=o+'d.write("'+p().replace(/"/g,String.fromCharCode(92)+'"')+'");d.close();'}a.P(2)};ld()};nt()})({
		loader: "static.olark.com/jsclient/loader0.js",name:"olark",methods:["configure","extend","declare","identify"]});
		/* custom configuration goes here (www.olark.com/documentation) */
		olark.identify('9752-503-10-5227');/*]]>*/</script><noscript><a href="https://www.olark.com/site/9752-503-10-5227/contact" title="Contact us" target="_blank">Questions? Feedback?</a> powered by <a href="http://www.olark.com?welcome" title="Olark live chat software">Olark live chat software</a></noscript>
		<!-- end olark code -->
		<!-- Track Olark chats in GTM (so can pass data onto Snowplow) -->
		<script type="text/javascript">
		olark('api.chat.onMessageToOperator', function(event) {
		    dataLayer.push({'event': 'olarkMessageToOperator'});
		});
		olark('api.chat.onMessageToVisitor', function(event) {
		    dataLayer.push({'event': 'olarkMessageToVisitor'});
		});
		</script>
		<!-- end track olark code -->


</body>
</html>